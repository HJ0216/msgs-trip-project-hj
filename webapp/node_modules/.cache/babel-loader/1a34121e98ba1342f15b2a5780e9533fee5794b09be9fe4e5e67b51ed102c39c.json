{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KaKaoCallback = () => {\n  _s();\n  const [kakaoEmail, setKakaoEmail] = useState('');\n  useEffect(() => {\n    const params = new URL(document.location.toString()).searchParams;\n    const code = params.get(\"code\");\n    const grantType = \"authorization_code\";\n    const REST_API_KEY = `${process.env.REACT_APP_PUBLIC_REST_API_KEY}`;\n    const REDIRECT_URI = `${process.env.REACT_APP_REDIRECT_KAKAO_URL}`;\n    axios.post(`https://kauth.kakao.com/oauth/token?grant_type=${grantType}&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}&code=${code}`, {}, {\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded;charset=utf-8\"\n      }\n    }).then(function (res) {\n      console.log(res);\n      const {\n        data\n      } = res;\n      const {\n        access_token\n      } = data;\n      axios.post(\"https://kapi.kakao.com/v2/user/me\", {}, {\n        headers: {\n          Authorization: `Bearer ${access_token}`,\n          \"Content-type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then(function (res) {\n        console.log(\"데이터 성공\", res);\n        console.log(\"데이터 성공\");\n        fetch(\"/user/kakaologin\", {\n          method: \"post\",\n          body: JSON.stringify({\n            email: res.data.kakao_account.email,\n            type: \"k\"\n          })\n        }).then(response => response.json()).then(res => console.log(res));\n      });\n    }).catch(function (Error) {\n      console.log(\"ERR\", Error);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n_s(KaKaoCallback, \"mptRpJz9LmrudKZz391BwFCkKqA=\");\n_c = KaKaoCallback;\nexport default KaKaoCallback;\nvar _c;\n$RefreshReg$(_c, \"KaKaoCallback\");","map":{"version":3,"names":["axios","React","useState","useEffect","Fragment","_Fragment","jsxDEV","_jsxDEV","KaKaoCallback","_s","kakaoEmail","setKakaoEmail","params","URL","document","location","toString","searchParams","code","get","grantType","REST_API_KEY","process","env","REACT_APP_PUBLIC_REST_API_KEY","REDIRECT_URI","REACT_APP_REDIRECT_KAKAO_URL","post","headers","then","res","console","log","data","access_token","Authorization","fetch","method","body","JSON","stringify","email","kakao_account","type","response","json","catch","Error","_c","$RefreshReg$"],"sources":["C:/MSGS/MSGS/src/main/webapp/src/components/login/KaKaoCallback.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst KaKaoCallback = () => {\r\n    const [kakaoEmail, setKakaoEmail] = useState('');\r\n\r\n    useEffect(() => {\r\n        const params = new URL(document.location.toString()).searchParams;\r\n        const code = params.get(\"code\");\r\n        const grantType = \"authorization_code\";\r\n        const REST_API_KEY = `${process.env.REACT_APP_PUBLIC_REST_API_KEY}`;\r\n        const REDIRECT_URI = `${process.env.REACT_APP_REDIRECT_KAKAO_URL}`;\r\n\r\n        axios\r\n            .post(\r\n                `https://kauth.kakao.com/oauth/token?grant_type=${grantType}&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}&code=${code}`,\r\n                {},\r\n                {\r\n                    headers: {\r\n                        \"Content-type\":\r\n                            \"application/x-www-form-urlencoded;charset=utf-8\",\r\n                    },\r\n                }\r\n            )\r\n            .then(function (res) {\r\n                console.log(res);\r\n                const { data } = res;\r\n                const { access_token } = data;\r\n                axios\r\n                    .post(\r\n                        \"https://kapi.kakao.com/v2/user/me\",\r\n                        {},\r\n                        {\r\n                            headers: {\r\n                                Authorization: `Bearer ${access_token}`,\r\n                                \"Content-type\":\r\n                                    \"application/x-www-form-urlencoded\",\r\n                            },\r\n                        }\r\n                    )\r\n                    .then(function (res) {\r\n                        console.log(\"데이터 성공\", res);\r\n                        console.log(\"데이터 성공\");\r\n\r\n                        fetch(\"/user/kakaologin\", {\r\n                            method: \"post\",\r\n                            body: JSON.stringify({\r\n                                email: res.data.kakao_account.email,\r\n                                type: \"k\",\r\n                            }),\r\n                        })\r\n                            .then((response) => response.json())\r\n                            .then((res) => console.log(res));\r\n                    });\r\n            })\r\n            .catch(function (Error) {\r\n                console.log(\"ERR\", Error);\r\n            });\r\n    }, []);\r\n\r\n    return <></>;\r\n};\r\n\r\nexport default KaKaoCallback;\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEnD,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACZ,MAAMS,MAAM,GAAG,IAAIC,GAAG,CAACC,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,YAAY;IACjE,MAAMC,IAAI,GAAGN,MAAM,CAACO,GAAG,CAAC,MAAM,CAAC;IAC/B,MAAMC,SAAS,GAAG,oBAAoB;IACtC,MAAMC,YAAY,GAAI,GAAEC,OAAO,CAACC,GAAG,CAACC,6BAA8B,EAAC;IACnE,MAAMC,YAAY,GAAI,GAAEH,OAAO,CAACC,GAAG,CAACG,4BAA6B,EAAC;IAElE1B,KAAK,CACA2B,IAAI,CACA,kDAAiDP,SAAU,cAAaC,YAAa,iBAAgBI,YAAa,SAAQP,IAAK,EAAC,EACjI,CAAC,CAAC,EACF;MACIU,OAAO,EAAE;QACL,cAAc,EACV;MACR;IACJ,CACJ,CAAC,CACAC,IAAI,CAAC,UAAUC,GAAG,EAAE;MACjBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChB,MAAM;QAAEG;MAAK,CAAC,GAAGH,GAAG;MACpB,MAAM;QAAEI;MAAa,CAAC,GAAGD,IAAI;MAC7BjC,KAAK,CACA2B,IAAI,CACD,mCAAmC,EACnC,CAAC,CAAC,EACF;QACIC,OAAO,EAAE;UACLO,aAAa,EAAG,UAASD,YAAa,EAAC;UACvC,cAAc,EACV;QACR;MACJ,CACJ,CAAC,CACAL,IAAI,CAAC,UAAUC,GAAG,EAAE;QACjBC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,GAAG,CAAC;QAC1BC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;QAErBI,KAAK,CAAC,kBAAkB,EAAE;UACtBC,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBC,KAAK,EAAEX,GAAG,CAACG,IAAI,CAACS,aAAa,CAACD,KAAK;YACnCE,IAAI,EAAE;UACV,CAAC;QACL,CAAC,CAAC,CACGd,IAAI,CAAEe,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnChB,IAAI,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;MACxC,CAAC,CAAC;IACV,CAAC,CAAC,CACDgB,KAAK,CAAC,UAAUC,KAAK,EAAE;MACpBhB,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEe,KAAK,CAAC;IAC7B,CAAC,CAAC;EACV,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAOxC,OAAA,CAAAF,SAAA,mBAAI,CAAC;AAChB,CAAC;AAACI,EAAA,CA1DID,aAAa;AAAAwC,EAAA,GAAbxC,aAAa;AA4DnB,eAAeA,aAAa;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}